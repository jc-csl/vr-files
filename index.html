<script>
    const user = "jc-csl"; 
    const repo = "vr-files";
    const folder = "files";

    async function getFiles() {
        const tableBody = document.getElementById('file-list');
        try {
            const response = await fetch(`https://api.github.com/repos/${user}/${repo}/contents/${folder}`);
            const files = await response.json();

            tableBody.innerHTML = "";
            files.forEach(file => {
                if (file.type === "file") {
                    const url = `https://${user}.github.io/${repo}/${file.path}`;
                    const row = `
                    <tr>
                        <td>${file.name}</td>
                        <td>${(file.size / 1024).toFixed(2)} KB</td>
                        <td>
                            <button onclick="copyToClipboard('${url}', this)">Copiar URL</button>
                        </td>
                    </tr>`;
                    tableBody.innerHTML += row;
                }
            });
        } catch (error) {
            tableBody.innerHTML = "<tr><td colspan='3'>Error al cargar archivos.</td></tr>";
        }
    }

    function copyToClipboard(text, button) {
        navigator.clipboard.writeText(text).then(() => {
            const originalText = button.innerText;
            button.innerText = "¡Copiado! ✅";
            button.style.background = "#28a745";
            button.style.color = "white";
            
            setTimeout(() => {
                button.innerText = originalText;
                button.style.background = "";
                button.style.color = "";
            }, 2000);
        });
    }

    getFiles();
</script>