<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>VR Repository</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a1a; color: white; padding: 20px; text-align: center; }
        .container { max-width: 850px; margin: auto; text-align: left; }
        .file-item { 
            background: #2a2a2a; margin: 12px 0; padding: 18px; 
            border-radius: 10px; display: flex; justify-content: space-between; align-items: center;
            border: 1px solid #383838; transition: transform 0.2s;
        }
        .file-item:hover { transform: scale(1.01); border-color: #00d4ff; }
        .file-info { display: flex; flex-direction: column; }
        .file-name { font-weight: bold; font-size: 1.1em; color: #fff; }
        .file-size { color: #888; font-size: 0.85em; margin-top: 4px; }
        button { 
            background: #00d4ff; border: none; padding: 12px 20px; 
            border-radius: 6px; cursor: pointer; font-weight: bold; color: #1a1a1a;
            transition: 0.3s;
        }
        button:hover { background: #0099cc; box-shadow: 0 0 10px rgba(0,212,255,0.3); }
    </style>
</head>
<body>

    <h1 id="main-title"></h1>
    <div class="container" id="lista"></div>

    <script>
        // ==========================================
        // CONFIGURACIÓN CONSTANTE AL INICIO
        // ==========================================
        const CONFIG = {
            user: "jc-csl",
            repo: "vr-files",
            folder: "files",
            tituloPagina: "VR CSL",
            textoCargando: "Cargando modelos 3D...",
            textoBoton: "Copiar URL",
            textoExito: "¡Copiado! ✅",
            errorMsg: "Error: No se pudieron listar los archivos."
        };

        // Aplicar título
        document.getElementById('main-title').innerText = CONFIG.tituloPagina;

        async function cargarModelos() {
            const contenedor = document.getElementById('lista');
            contenedor.innerHTML = `<p style="text-align:center">${CONFIG.textoCargando}</p>`;

            try {
                const api = `https://api.github.com/repos/${CONFIG.user}/${CONFIG.repo}/contents/${CONFIG.folder}`;
                const respuesta = await fetch(api);
                const items = await respuesta.json();

                if (!respuesta.ok) throw new Error();

                contenedor.innerHTML = ""; // Limpiar

                items.forEach(archivo => {
                    if (archivo.type === "file") {
                        const urlLink = `https://${CONFIG.user}.github.io/${CONFIG.repo}/${archivo.path}`;
                        
                        // CONVERSIÓN A MB
                        const sizeMB = (archivo.size / (1024 * 1024)).toFixed(2);

                        const div = document.createElement('div');
                        div.className = 'file-item';
                        div.innerHTML = `
                            <div class="file-info">
                                <span class="file-name">${archivo.name}</span>
                                <span class="file-size">${sizeMB} MB</span>
                            </div>
                            <button onclick="copiarAlPortapapeles('${urlLink}', this)">${CONFIG.textoBoton}</button>
                        `;
                        contenedor.appendChild(div);
                    }
                });
            } catch (e) {
                contenedor.innerHTML = `<p style="color:#ff6b6b; text-align:center">${CONFIG.errorMsg}</p>`;
            }
        }

        function copiarAlPortapapeles(texto, btn) {
            navigator.clipboard.writeText(texto).then(() => {
                const original = btn.innerText;
                btn.innerText = CONFIG.textoExito;
                btn.style.background = "#00ff88";
                setTimeout(() => {
                    btn.innerText = original;
                    btn.style.background = "#00d4ff";
                }, 1500);
            });
        }

        cargarModelos();
    </script>
</body>
</html>