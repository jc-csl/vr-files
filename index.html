<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>VR Repository</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; padding: 20px; text-align: center; }
        .container { max-width: 800px; margin: auto; text-align: left; }
        .file-item { 
            background: #2a2a2a; margin: 10px 0; padding: 15px; 
            border-radius: 8px; display: flex; justify-content: space-between; align-items: center;
            border: 1px solid #333;
        }
        button { 
            background: #00d4ff; border: none; padding: 10px 15px; 
            border-radius: 5px; cursor: pointer; font-weight: bold; transition: 0.2s;
        }
        button:hover { background: #0099cc; }
        .info { color: #888; font-size: 0.85em; margin-top: 4px; display: block; }
    </style>
</head>
<body>

    <h1 id="main-title"></h1>
    <div class="container" id="lista"></div>

    <script>
        // ==========================================
        // CONFIGURACIÓN Y TEXTOS
        // ==========================================
        const CONFIG = {
            user: "jc-csl",
            repo: "vr-files",
            folder: "files",
            tituloPagina: "MI REPOSITORIO VR",
            textoCargando: "Buscando modelos...",
            textoBotonCopiar: "Copiar URL",
            textoCopiado: "¡Copiado! ✅",
            errorTexto: "Error al conectar con el servidor."
        };

        document.getElementById('main-title').innerText = CONFIG.tituloPagina;
        document.getElementById('lista').innerText = CONFIG.textoCargando;

        async function cargarArchivos() {
            const listaDiv = document.getElementById('lista');
            try {
                const urlApi = `https://api.github.com/repos/${CONFIG.user}/${CONFIG.repo}/contents/${CONFIG.folder}`;
                const res = await fetch(urlApi);
                const archivos = await res.json();

                if (!res.ok) throw new Error();

                listaDiv.innerHTML = "";

                archivos.forEach(archivo => {
                    if (archivo.type === "file") {
                        const urlPublica = `https://${CONFIG.user}.github.io/${CONFIG.repo}/${archivo.path}`;
                        // Cálculo de MB con 2 decimales
                        const pesoMB = (archivo.size / (1024 * 1024)).toFixed(2);
                        
                        const item = document.createElement('div');
                        item.className = 'file-item';
                        item.innerHTML = `
                            <div>
                                <strong>${archivo.name}</strong>
                                <span class="info">${pesoMB} MB</span>
                            </div>
                            <button onclick="copiar('${urlPublica}', this)">${CONFIG.textoBotonCopiar}</button>
                        `;
                        listaDiv.appendChild(item);
                    }
                });
            } catch (e) {
                listaDiv.innerHTML = `<p style="color:red">${CONFIG.errorTexto}</p>`;
            }
        }

        function copiar(texto, boton) {
            navigator.clipboard.writeText(texto);
            const original = boton.innerText;
            boton.innerText = CONFIG.textoCopiado;
            setTimeout(() => boton.innerText = original, 2000);
        }

        cargarArchivos();
    </script>
</body>
</html>